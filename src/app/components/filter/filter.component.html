<div class="filter-container">
  <!-- Sort Section -->
  <div class="sort-section mb-4">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5 class="fw-bold mb-0 text-dark">Sort by</h5>
      <button 
        *ngIf="selectedSort" 
        class="btn reset-btn" 
        (click)="resetSort()">
        <i class="fas fa-undo-alt"></i> Reset
      </button>
    </div>
    <select
      class="form-select"
      [(ngModel)]="selectedSort"
      (change)="onSortChange($event)"
    >
      <option value="" disabled>Select an option</option>
      <option value="title_asc">Title: A to Z</option>
      <option value="title_desc">Title: Z to A</option>
      <option value="price_asc">Price: Low to High</option>
      <option value="price_desc">Price: High to Low</option>
      <option value="rating_asc">Rating: Low to High</option>
      <option value="rating_desc">Rating: High to Low</option>
    </select>
  </div>

  <!-- Filter Header -->
  <div class="filter-header d-flex justify-content-between align-items-center mb-3">
    <h5 class="fw-bold mb-0">Filter:</h5>
    <button
      *ngIf="activeFilters.length > 0"
      class="btn reset-btn"
      (click)="clearAllFilters()"
    >
      <i class="fas fa-times"></i> Clear all
    </button>
  </div>

  <!-- Active Filters Display -->
  <div class="active-filters-container mb-4" *ngIf="activeFilters.length > 0">
    <div class="active-filters d-flex flex-wrap gap-2">
      <span *ngFor="let filter of activeFilters" class="active-filter-badge">
        {{ filter.label }}: {{ filter.value }}
        <span class="ms-1 filter-remove-icon" (click)="removeFilter(filter)">Ã—</span>
      </span>
    </div>
  </div>

  <!-- Genre Section -->
  <div class="filter-section mb-4">
    <button
      class="filter-toggle-btn w-100 text-start d-flex justify-content-between align-items-center"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#genreCollapse"
      aria-expanded="true"
    >
      <span>Genre</span> <i class="fas fa-chevron-down"></i>
    </button>
    <div class="collapse show filter-content" id="genreCollapse">
      <div class="form-check mb-2" *ngFor="let item of filters.genre">
        <input
          class="form-check-input"
          type="checkbox"
          [checked]="isChecked('genre', item)"
          (change)="toggleFilter('genre', item, $event)"
          [id]="'genre-' + item"
        />
        <label class="form-check-label" [for]="'genre-' + item">{{ item }}</label>
      </div>
    </div>
  </div>

  <!-- Price Section -->
  <div class="filter-section mb-4">
    <button
      class="filter-toggle-btn w-100 text-start d-flex justify-content-between align-items-center"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#priceCollapse"
      aria-expanded="true"
    >
      <span>Price</span> <i class="fas fa-chevron-down"></i>
    </button>
    <div class="collapse show filter-content" id="priceCollapse">
      <div class="form-check mb-2" *ngFor="let item of filters.price">
        <input
          class="form-check-input"
          type="checkbox"
          [checked]="isChecked('price', item)"
          (change)="toggleFilter('price', item, $event)"
          [id]="'price-' + item"
        />
        <label class="form-check-label" [for]="'price-' + item">{{ item }}</label>
      </div>
    </div>
  </div>

  <!-- Language Section -->
  <div class="filter-section mb-4">
    <button
      class="filter-toggle-btn w-100 text-start d-flex justify-content-between align-items-center"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#languageCollapse"
      aria-expanded="true"
    >
      <span>Language</span> <i class="fas fa-chevron-down"></i>
    </button>
    <div class="collapse show filter-content" id="languageCollapse">
      <div class="form-check mb-2" *ngFor="let item of filters.language">
        <input
          class="form-check-input"
          type="checkbox"
          [checked]="isChecked('language', item)"
          (change)="toggleFilter('language', item, $event)"
          [id]="'lang-' + item"
        />
        <label class="form-check-label" [for]="'lang-' + item">{{ item }}</label>
      </div>
    </div>
  </div>
</div>
